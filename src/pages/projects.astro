---
import { getCollection } from 'astro:content';
import H1 from "../components/h1.astro";
import ProjectsSection from "../components/projects-section.astro";
import InfoLayout from "../layouts/InfoLayout.astro";

const pageTitle = "Projects | Jasper Doan - Frontend Developer Portfolio";
const pageDescription = "Explore Jasper Doan's portfolio of frontend development and software engineering projects. See examples of React, TypeScript, and web development work.";

// Fetch all projects from CMS
const allProjects = await getCollection('projects');

// Sort projects by order field (lower numbers first)
const projects = allProjects.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));

const mainProjects = projects.filter(p => p.data.category === "main");
const sideProjects = projects.filter(p => p.data.category === "side");
---

<InfoLayout title={pageTitle} description={pageDescription}>
     <div class="p-4 pb-20 sm:pt-8 sm:px-12 min-h-dvh">
          <H1> Projects </H1>

          <ProjectsSection title="Main Projects" projects={mainProjects} />
          <ProjectsSection title="Side Projects" projects={sideProjects} className="mt-12 sm:mt-16" />
     </div>
</InfoLayout>
